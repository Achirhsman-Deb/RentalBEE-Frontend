import { useEffect, useState } from "react";
import { useSelector } from "react-redux";
import { NavLink } from "react-router-dom";
import { RootState } from "../store/store";

function Footer() {
  const [loggedin, setloggedin] = useState<boolean>(false);
  const { user } = useSelector((state: RootState) => state.auth);
  const today = new Date();
  const year = today.getFullYear();

  useEffect(() => {
    if (user) {
      setloggedin(true);
      localStorage.setItem("user", JSON.stringify(user));
    } else setloggedin(false);
  }, [user]);

  return (
    <footer className="relative bg-[#FFFBF3] bottom-0 w-full z-0 pb-16 md:pb-4 lg:pb-2">
      {/* Top Section */}
      <div className="h-16 max-[540px]:p-5 max-[540px]:h-auto max-[540px]:gap-8 border-t border-gray-200 mt-10 flex justify-between pl-10 pr-10 items-center max-[540px]:flex-col">
        <div className="text-xl font-bold">
          Rental<span className="text-[#FFD60A]">BEE</span>
        </div>

        {/* Desktop Navigation */}
        <div className="gap-6 text-sm mt-2 md:mt-0 hidden md:flex">
          {user?.role === "ADMIN" ? (
            <NavLink to="/dashboard" className="hover:underline">
              Dashboard
            </NavLink>
          ) : (
            <>
              <NavLink to="/" className="hover:underline">
                Home
              </NavLink>
              <NavLink to="/cars" className="hover:underline">
                Cars
              </NavLink>
              {loggedin && (
                <NavLink to="/my-bookings" className="hover:underline">
                  My bookings
                </NavLink>
              )}
            </>
          )}
        </div>

        {/* Social Icons */}
        <div className="flex gap-2 justify-center items-center">
          <svg
            width="10"
            height="17"
            viewBox="0 0 10 17"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M9.25 1H7C6.00544 1 5.05161 1.39509 4.34835 2.09835C3.64509 2.80161 3.25 3.75544 3.25 4.75V7H1V10H3.25V16H6.25V10H8.5L9.25 7H6.25V4.75C6.25 4.55109 6.32902 4.36032 6.46967 4.21967C6.61032 4.07902 6.80109 4 7 4H9.25V1Z"
              stroke="black"
              strokeLinecap="round"
              strokeLinejoin="round"
            />
          </svg>

          <svg
            width="16"
            height="16"
            viewBox="0 0 16 16"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M8.00075 5.75C7.40401 5.75 6.83172 5.98705 6.40976 6.40901C5.9878 6.83097 5.75075 7.40326 5.75075 8C5.75075 8.59674 5.9878 9.16903 6.40976 9.59099C6.83172 10.0129 7.40401 10.25 8.00075 10.25C8.59749 10.25 9.16978 10.0129 9.59174 9.59099C10.0137 9.16903 10.2508 8.59674 10.2508 8C10.2508 7.40326 10.0137 6.83097 9.59174 6.40901C9.16978 5.98705 8.59749 5.75 8.00075 5.75ZM8.00075 4.25C8.99531 4.25 9.94914 4.64509 10.6524 5.34835C11.3557 6.05161 11.7507 7.00544 11.7507 8C11.7507 8.99456 11.3557 9.94839 10.6524 10.6517C9.94914 11.3549 8.99531 11.75 8.00075 11.75C7.00619 11.75 6.05236 11.3549 5.3491 10.6517C4.64584 9.94839 4.25075 8.99456 4.25075 8C4.25075 7.00544 4.64584 6.05161 5.3491 5.34835C6.05236 4.64509 7.00619 4.25 8.00075 4.25ZM12.8757 4.0625C12.8757 4.31114 12.777 4.5496 12.6012 4.72541C12.4253 4.90123 12.1869 5 11.9382 5C11.6896 5 11.4512 4.90123 11.2753 4.72541C11.0995 4.5496 11.0007 4.31114 11.0007 4.0625C11.0007 3.81386 11.0995 3.5754 11.2753 3.39959C11.4512 3.22377 11.6896 3.125 11.9382 3.125C12.1869 3.125 12.4253 3.22377 12.6012 3.39959C12.777 3.5754 12.8757 3.81386 12.8757 4.0625ZM8.00075 2C6.14525 2 5.84225 2.00525 4.979 2.0435C4.391 2.07125 3.9965 2.15 3.6305 2.2925C3.32437 2.40528 3.04754 2.58548 2.8205 2.81975C2.58595 3.04671 2.4055 3.32355 2.2925 3.62975C2.15 3.99725 2.07125 4.391 2.04425 4.97825C2.00525 5.80625 2 6.09575 2 8C2 9.85625 2.00525 10.1585 2.0435 11.0217C2.07125 11.609 2.15 12.0043 2.29175 12.3695C2.41925 12.6958 2.56925 12.9305 2.81825 13.1795C3.071 13.4315 3.30575 13.5822 3.62825 13.7067C3.99875 13.85 4.39325 13.9295 4.97825 13.9565C5.80625 13.9955 6.09575 14 8 14C9.85625 14 10.1585 13.9947 11.0217 13.9565C11.6082 13.9287 12.0028 13.85 12.3695 13.7083C12.6756 13.5955 12.9525 13.4153 13.1795 13.181C13.4323 12.929 13.583 12.6942 13.7075 12.371C13.85 12.002 13.9295 11.6075 13.9565 11.021C13.9955 10.1938 14 9.9035 14 8C14 6.1445 13.9947 5.8415 13.9565 4.97825C13.9287 4.39175 13.8493 3.99575 13.7075 3.62975C13.5947 3.32362 13.4145 3.04679 13.1803 2.81975C12.9533 2.5852 12.6764 2.40475 12.3702 2.29175C12.0027 2.14925 11.6082 2.0705 11.0217 2.0435C10.1945 2.0045 9.90575 2 8.00075 2ZM8 0.5C10.0378 0.5 10.292 0.5075 11.0922 0.545C11.8902 0.5825 12.4347 0.70775 12.9125 0.89375C13.4075 1.08425 13.8245 1.34225 14.2415 1.7585C14.623 2.1333 14.9181 2.58685 15.1063 3.0875C15.2915 3.56525 15.4175 4.10975 15.455 4.9085C15.4902 5.708 15.5 5.96225 15.5 8C15.5 10.0378 15.4925 10.292 15.455 11.0915C15.4175 11.891 15.2915 12.434 15.1063 12.9125C14.9181 13.4131 14.623 13.8667 14.2415 14.2415C13.8667 14.623 13.4131 14.9181 12.9125 15.1063C12.4347 15.2915 11.8902 15.4175 11.0922 15.455C10.292 15.4902 10.0378 15.5 8 15.5C5.96225 15.5 5.708 15.4925 4.90775 15.455C4.10975 15.4175 3.566 15.2915 3.0875 15.1063C2.58685 14.9181 2.1333 14.623 1.7585 14.2415C1.37698 13.8667 1.08186 13.4131 0.89375 12.9125C0.70775 12.4347 0.5825 11.8902 0.545 11.0915C0.509 10.292 0.5 10.0378 0.5 8C0.5 5.96225 0.5075 5.708 0.545 4.9085C0.5825 4.109 0.70775 3.566 0.89375 3.0875C1.08186 2.58685 1.37698 2.1333 1.7585 1.7585C2.1333 1.37698 2.58685 1.08186 3.0875 0.89375C3.56525 0.70775 4.109 0.5825 4.90775 0.545C5.70875 0.50975 5.96225 0.5 8 0.5Z"
              fill="black"
            />
          </svg>

          <svg
            width="16"
            height="15"
            viewBox="0 0 16 15"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M12.6008 0H15.0544L9.6944 6.1L16 14.4H11.0624L7.196 9.3656L2.7712 14.4H0.3152L6.0488 7.876L0 0H5.0624L8.5584 4.6016L12.6008 0ZM11.74 12.9376H13.1L4.3232 1.3856H2.864L11.74 12.9376Z"
              fill="black"
            />
          </svg>
        </div>
      </div>

      {/* Copyright */}
      <div className="flex justify-center items-center md:mt-2">
        <span className="text-[12px] text-[#666666]">Â©{year} RentalBEE</span>
      </div>
    </footer>
  );
}

export default Footer;
